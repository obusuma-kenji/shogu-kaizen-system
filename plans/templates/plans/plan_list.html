<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å‡¦é‡æ”¹å–„è¨ˆç”»æ›¸ä¸€è¦§</title>
    <style>
        body { font-family: sans-serif; max-width: 1400px; margin: 20px auto; padding: 0 20px; background: #f5f5f5; }
        h1 { color: #333; }
        .controls { margin-bottom: 20px; }
        .controls a { display: inline-block; padding: 10px 20px; background: #667eea; color: white; text-decoration: none; border-radius: 5px; margin-right: 10px; }
        .controls a:hover { background: #5568d3; }
        .plan-table { width: 100%; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #667eea; color: white; font-weight: bold; }
        tr:hover { background: #f9f9f9; }
        .badge { padding: 5px 10px; border-radius: 3px; font-size: 0.9em; font-weight: bold; }
        .badge-draft { background: #fff3cd; color: #856404; }
        .badge-submitted { background: #d4edda; color: #155724; }
        .badge-approved { background: #d1ecf1; color: #0c5460; }
        .tier-badge { padding: 3px 8px; background: #667eea; color: white; border-radius: 3px; font-size: 0.9em; }
        .view-link { color: #667eea; text-decoration: none; font-weight: bold; }
        .view-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>ğŸ“‹ å‡¦é‡æ”¹å–„è¨ˆç”»æ›¸ä¸€è¦§</h1>
    
    <div class="controls">
        <a href="/plan-wizard/">â• æ–°è¦ä½œæˆ</a>
        <a href="/">ğŸ  ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</a>
        <a href="/admin/">âš™ï¸ ç®¡ç†ç”»é¢</a>
    </div>
    
    <div class="plan-table">
        <table>
            <thead>
                <tr>
                    <th>äº‹æ¥­è€…</th>
                    <th>å¯¾è±¡å¹´åº¦</th>
                    <th>ç”³è«‹åŠ ç®—</th>
                    <th>åˆ¤å®šçµæœ</th>
                    <th>åŠ ç®—è¦‹è¾¼é¡</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                    <th>ä½œæˆæ—¥</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for plan in plans %}
                <tr>
                    <td><strong>{{ plan.provider.name }}</strong></td>
                    <td>{{ plan.fiscal_year }}å¹´åº¦</td>
                    <td><span class="tier-badge">{{ plan.get_target_addition_tier_display }}</span></td>
                    <td>
                        {% if plan.determined_addition_tier %}
                        <span class="tier-badge">{{ plan.get_determined_addition_tier_display }}</span>
                        {% else %}
                        <span style="color: #999;">æœªåˆ¤å®š</span>
                        {% endif %}
                    </td>
                    <td><strong>{{ plan.estimated_addition_amount|floatformat:0 }}å††</strong></td>
                    <td>
                        <span class="badge badge-{{ plan.status }}">{{ plan.get_status_display }}</span>
                    </td>
                    <td>{{ plan.created_at|date:"Y/m/d" }}</td>
                    <td><a href="{% url 'plan_detail' plan.id %}" class="view-link">è©³ç´°ã‚’è¦‹ã‚‹</a></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" style="text-align: center; padding: 40px; color: #999;">
                        å‡¦é‡æ”¹å–„è¨ˆç”»æ›¸ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>
                        <a href="/plan-wizard/" style="color: #667eea;">æ–°è¦ä½œæˆ</a>ã—ã¦ãã ã•ã„ã€‚
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
