<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¦ä»¶â…¡ï¼šäººæè‚²æˆã®ä½“ç³» - {{ facility.name }}</title>
    <style>
        body { font-family: 'Hiragino Sans', sans-serif; max-width: 1400px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        h1 { color: #333; margin-bottom: 10px; }
        .facility-name { color: #666; margin-bottom: 30px; }
        .back-link { display: inline-block; margin-bottom: 20px; padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 5px; }
        .back-link:hover { background: #5a6268; }
        .btn-new { display: inline-block; margin-bottom: 20px; padding: 10px 20px; background: #28a745; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; }
        .btn-new:hover { background: #218838; }
        
        .plans-table { width: 100%; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .plans-table table { width: 100%; border-collapse: collapse; }
        .plans-table th { background: #667eea; color: white; padding: 15px; text-align: left; font-weight: bold; }
        .plans-table td { padding: 15px; border-bottom: 1px solid #eee; }
        .plans-table tr:hover { background: #f8f9fa; }
        .plans-table tr:last-child td { border-bottom: none; }
        
        .badge { padding: 5px 10px; border-radius: 3px; font-size: 0.85em; font-weight: bold; }
        .badge.ojt { background: #d1ecf1; color: #0c5460; }
        .badge.off-jt { background: #d4edda; color: #155724; }
        .badge.external { background: #fff3cd; color: #856404; }
        .badge.online { background: #cce5ff; color: #004085; }
        .badge.mandatory { background: #f8d7da; color: #721c24; }
        
        .action-btn { display: inline-block; padding: 8px 15px; background: #667eea; color: white; text-decoration: none; border-radius: 5px; font-size: 0.9em; margin-right: 5px; }
        .action-btn:hover { background: #5568d3; }
        
        .empty-state { text-align: center; padding: 60px 20px; color: #999; }
        .empty-state .icon { font-size: 3em; margin-bottom: 20px; }
        
        .info-box { background: #d1ecf1; padding: 20px; border-radius: 8px; margin-top: 30px; border-left: 4px solid #0c5460; }
        .info-box h3 { margin-top: 0; color: #0c5460; }
        .info-box p { color: #0c5460; line-height: 1.6; }
    </style>
</head>
<body>
    <a href="{% url 'career_path_requirements_index' facility.id %}" class="back-link">â† ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¦ä»¶è¨­è¨ˆã«æˆ»ã‚‹</a>
    
    <h1>ğŸ“š è¦ä»¶â…¡ï¼šäººæè‚²æˆã®ä½“ç³»</h1>
    <p class="facility-name">{{ facility.name }}</p>
    
    <a href="{% url 'training_plan_new' facility.id %}" class="btn-new">+ æ–°è¦ç ”ä¿®è¨ˆç”»ã‚’è¿½åŠ </a>
    
    {% if training_plans %}
    <div class="plans-table">
        <table>
            <thead>
                <tr>
                    <th>å¹´åº¦</th>
                    <th>ç ”ä¿®å</th>
                    <th>ç ”ä¿®å½¢æ…‹</th>
                    <th>å®Ÿæ–½äºˆå®šæ—¥</th>
                    <th>å¯¾è±¡è·ä½</th>
                    <th>å¿…é ˆ/ä»»æ„</th>
                    <th>æ™‚é–“</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for plan in training_plans %}
                <tr>
                    <td><strong>{{ plan.fiscal_year }}å¹´åº¦</strong></td>
                    <td>{{ plan.training_name }}</td>
                    <td>
                        {% if plan.training_type == 'OJT' %}
                            <span class="badge ojt">OJT</span>
                        {% elif plan.training_type == 'OFF_JT' %}
                            <span class="badge off-jt">Off-JT</span>
                        {% elif plan.training_type == 'EXTERNAL' %}
                            <span class="badge external">å¤–éƒ¨ç ”ä¿®</span>
                        {% elif plan.training_type == 'ONLINE' %}
                            <span class="badge online">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if plan.scheduled_date %}
                            {{ plan.scheduled_date|date:"Yå¹´mæœˆdæ—¥" }}
                        {% else %}
                            <span style="color: #999;">æœªå®š</span>
                        {% endif %}
                    </td>
                    <td>
                        {% for position in plan.target_positions.all %}
                            <span style="margin-right: 5px;">{{ position.position_name }}</span>
                        {% endfor %}
                    </td>
                    <td>
                        {% if plan.is_mandatory %}
                            <span class="badge mandatory">å¿…é ˆ</span>
                        {% else %}
                            <span style="color: #999;">ä»»æ„</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if plan.duration_hours %}
                            {{ plan.duration_hours }}æ™‚é–“
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'training_plan_edit' facility.id plan.id %}" class="action-btn">ç·¨é›†</a>
                        <a href="/admin/career_management/trainingplan/{{ plan.id }}/change/" class="action-btn" target="_blank">è©³ç´°</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="plans-table">
        <div class="empty-state">
            <div class="icon">ğŸ“š</div>
            <p><strong>ç ”ä¿®è¨ˆç”»ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</strong></p>
            <p>ã€Œæ–°è¦ç ”ä¿®è¨ˆç”»ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰ç ”ä¿®è¨ˆç”»ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
        </div>
    </div>
    {% endif %}
    
    <div class="info-box">
        <h3>ğŸ’¡ ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¦ä»¶â…¡ã«ã¤ã„ã¦</h3>
        <p>
            è¦ä»¶â…¡ã¯ã€Œè³‡è³ªå‘ä¸Šã®ãŸã‚ã®è¨ˆç”»ã‚’ç­–å®šã—ã€ç ”ä¿®ã®å®Ÿæ–½ã¾ãŸã¯ç ”ä¿®ã®æ©Ÿä¼šã‚’ç¢ºä¿ã€ã™ã‚‹ã“ã¨ãŒå¿…è¦ã§ã™ã€‚
        </p>
        <p>
            å¹´é–“ç ”ä¿®è¨ˆç”»ã‚’ç­–å®šã—ã€è·ä½åˆ¥ã«å¿…è¦ãªç ”ä¿®ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ã§ã€è¨ˆç”»çš„ãªäººæè‚²æˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
            OJTï¼ˆè·å ´å†…è¨“ç·´ï¼‰ã€Off-JTï¼ˆè·å ´å¤–è¨“ç·´ï¼‰ã€å¤–éƒ¨ç ”ä¿®ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒåŠ¹æœçš„ã§ã™ã€‚
        </p>
        <ul style="color: #0c5460; line-height: 1.8;">
            <li><strong>OJT</strong>ï¼šæ—¥å¸¸æ¥­å‹™ã‚’é€šã˜ãŸæŒ‡å°ãƒ»è‚²æˆ</li>
            <li><strong>Off-JT</strong>ï¼šæ–½è¨­å†…ã§ã®é›†åˆç ”ä¿®</li>
            <li><strong>å¤–éƒ¨ç ”ä¿®</strong>ï¼šå¤–éƒ¨æ©Ÿé–¢ãŒå®Ÿæ–½ã™ã‚‹å°‚é–€ç ”ä¿®</li>
            <li><strong>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç ”ä¿®</strong>ï¼šeãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãªã©ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’</li>
        </ul>
    </div>
</body>
</html>
